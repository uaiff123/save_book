<!doctype html>
<html>
<head><meta charset="utf-8"><title>Check-in</title><link rel="stylesheet" href="/styles.css"></head>
<body>
  <div class="container">
    <a href="/">← กลับ</a>
    <div class="card">
      <h2>บันทึกเวลาเข้า-ออก</h2>
      <input id="fullname" class="input" placeholder="ชื่อ–นามสกุล">
      <input id="studentId" class="input" placeholder="รหัสนักศึกษา">
      <input id="year" class="input" placeholder="ชั้นปี">
      <input id="major" class="input" placeholder="สาขาวิชา">
      <input id="timeIn" class="input" placeholder="เวลาเข้า (เช่น 09:10)">
      <input id="timeOut" class="input" placeholder="เวลาออก (เช่น 11:05)">
      <input id="book" class="input" placeholder="ชื่อหนังสือที่อ่าน">
      <input id="library" class="input" placeholder="ห้องสมุด / โซน">

      <button id="submit" class="btn btn-primary" style="margin-top:12px">บันทึกข้อมูล</button>

      <p id="msg" class="small"></p>
    </div>
  </div>

<script>
document.getElementById('submit').onclick = async () => {
  const payload = {
    fullname: document.getElementById('fullname').value,
    studentId: document.getElementById('studentId').value,
    year: document.getElementById('year').value,
    major: document.getElementById('major').value,
    timeIn: document.getElementById('timeIn').value,
    timeOut: document.getElementById('timeOut').value,
    book: document.getElementById('book').value,
    library: document.getElementById('library').value
  };
  const res = await fetch('/api/uselog/create', {
    method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload)
  });
  if(res.ok){
    document.getElementById('msg').textContent = 'บันทึกข้อมูลเสร็จแล้ว';
  } else {
    const j = await res.json();
    document.getElementById('msg').textContent = 'เกิดข้อผิดพลาด: ' + (j.error || res.statusText);
  }
}
</script>
</body>
</html>
