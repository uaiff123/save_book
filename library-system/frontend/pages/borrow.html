<!doctype html>
<html><head><meta charset="utf-8"><title>Borrow</title><link rel="stylesheet" href="/styles.css"></head>
<body>
  <div class="container">
    <a href="/">← กลับ</a>
    <div class="card">
      <h2>ยืมหนังสือ</h2>
      <input id="title" class="input" placeholder="ชื่อหนังสือ">
      <input id="authors" class="input" placeholder="ผู้แต่ง">
      <input id="isbn" class="input" placeholder="ISBN (ถ้ามี)">
      <input id="copies" type="number" class="input" placeholder="จำนวนสำเนา" value="1">
      <button id="addbook" class="btn btn-primary" style="margin-top:10px">เพิ่มหนังสือ</button>
      <p id="msg" class="small"></p>
    </div>
  </div>

<script>
document.getElementById('addbook').onclick = async () => {
  const payload = {
    title: document.getElementById('title').value,
    authors: document.getElementById('authors').value,
    isbn: document.getElementById('isbn').value,
    copies: Number(document.getElementById('copies').value) || 1
  };
  const res = await fetch('/api/books', {
    method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload)
  });
  const j = await res.json();
  if(res.ok) document.getElementById('msg').textContent = 'เพิ่มหนังสือเรียบร้อย';
  else document.getElementById('msg').textContent = 'Error: ' + (j.error || res.statusText);
}
</script>
</body></html>
